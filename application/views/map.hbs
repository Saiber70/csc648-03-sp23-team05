<!--* working maps api for test locations-->
<script>
    function initMap() {
        // Map options
        var options = {
            zoom: 8,
            center: { lat: 37.7749, lng: -122.4194 }
        }

        // New map
        var map = new google.maps.Map(document.getElementById('map'), options);

        var markers = [
        {{ #each results }}
        {
        coords: { lat: { { this.latitude } }, lng: { { this.longitude } } },
        content: '<h1>{{this.restaurant_name}}</h1><p>{{this.restaurant_address}}</p>'
        },
        {{/each}}
        ];

            for (let i = 0; i < markers.length; i++) {
                addMarker(markers[i]);
            }
            
            // Add the addMarker() function here
            function addMarker(props) {
                var marker = new google.maps.Marker({
                    position: props.coords,
                    map: map
                });

                if (props.content) {
                    var infoWindow = new google.maps.InfoWindow({
                        content: props.content
                    });

                    marker.addListener('click', function () {
                        infoWindow.open(map, marker);
                    });
                }
            }
        }
</script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCmqtDK6VhShU_U-oV8SrGI53wSluNA-wI&callback=initMap">
    </script>
<!--
<script>
    function initMap() {
        // Map options
        var options = {
            zoom: 8,
            center: { lat: 37.7749, lng: -122.4194 }
        }

        // New map
        var map = new google.maps.Map(document.getElementById('map'), options);

        var markers = [
            {
                coords: { lat: 37.72750000, lng: -122.47650000 },
                content: '<h1>Marugame Udon</h1>'
            },
            {
                coords: { lat: 37.73079, lng: -122.47604 },
                content: '<h1>Shake Shack</h1>'
            },
            {
                coords: { lat: 37.72760000, lng: -122.47660000 },
                content: '<h1>Chipotle</h1'
            },
            {
                coords: { lat: 37.72686000, lng: -122.47511000 },
                content: '<h1>Blaze Pizza</h1>'
            },
            {
                coords: { lat: 37.72770000, lng: -122.47670000 },
                content: '<h1>Panda Express</h1>'
            }
        ];

        for (let i = 0; i < markers.length; i++) {
            addMarker(markers[i]);
        }


        function addMarker(props) {
            var marker = new google.maps.Marker({
                position: props.coords,
                map: map
            });

            if (props.content) {
                var infoWindow = new google.maps.InfoWindow({
                    content: props.content
                });

                marker.addListener('click', function () {
                    infoWindow.open(map, marker);
                });
            }
        }
    }
</script>
-->



